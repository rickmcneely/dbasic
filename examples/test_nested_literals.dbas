' Test nested struct and slice literals
' This simulates Walk-style declarative syntax

TYPE MenuItem
    DIM text AS STRING
    DIM enabled AS BOOLEAN
END TYPE

TYPE Menu
    DIM title AS STRING
    DIM items AS []MenuItem
END TYPE

TYPE MenuBar
    DIM menus AS []Menu
END TYPE

TYPE Window
    DIM title AS STRING
    DIM width AS INTEGER
    DIM height AS INTEGER
    DIM menuBar AS MenuBar
END TYPE

SUB Main()
    ' Create a complete window with nested structures
    DIM win AS Window = Window{
        title: "My App",
        width: 800,
        height: 600,
        menuBar: MenuBar{
            menus: []Menu{
                Menu{
                    title: "File",
                    items: []MenuItem{
                        MenuItem{text: "New", enabled: TRUE},
                        MenuItem{text: "Open", enabled: TRUE},
                        MenuItem{text: "Save", enabled: FALSE}
                    }
                },
                Menu{
                    title: "Edit",
                    items: []MenuItem{
                        MenuItem{text: "Cut", enabled: TRUE},
                        MenuItem{text: "Copy", enabled: TRUE},
                        MenuItem{text: "Paste", enabled: TRUE}
                    }
                }
            }
        }
    }

    PRINT "Window:"; win.title
    PRINT "Size:"; win.width; "x"; win.height
    PRINT "Menus:"; LEN(win.menuBar.menus)

    ' Access nested data
    PRINT "First menu:"; win.menuBar.menus[0].title
    PRINT "First menu items:"; LEN(win.menuBar.menus[0].items)
    PRINT "First item:"; win.menuBar.menus[0].items[0].text

    PRINT "Second menu:"; win.menuBar.menus[1].title
    PRINT "Second menu items:"; LEN(win.menuBar.menus[1].items)
END SUB
